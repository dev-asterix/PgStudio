version: '3.8'

services:
  postgres-12:
    image: postgres:12-alpine
    container_name: pgstudio-test-pg12
    environment:
      POSTGRES_USER: testuser
      POSTGRES_PASSWORD: testpass
      POSTGRES_DB: testdb
    ports:
      - "5412:5432"
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U testuser"]
      interval: 10s
      timeout: 5s
      retries: 5
    volumes:
      - pgstudio-test-pg12:/var/lib/postgresql/data

  postgres-14:
    image: postgres:14-alpine
    container_name: pgstudio-test-pg14
    environment:
      POSTGRES_USER: testuser
      POSTGRES_PASSWORD: testpass
      POSTGRES_DB: testdb
    ports:
      - "5414:5432"
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U testuser"]
      interval: 10s
      timeout: 5s
      retries: 5
    volumes:
      - pgstudio-test-pg14:/var/lib/postgresql/data

  postgres-15:
    image: postgres:15-alpine
    container_name: pgstudio-test-pg15
    environment:
      POSTGRES_USER: testuser
      POSTGRES_PASSWORD: testpass
      POSTGRES_DB: testdb
    ports:
      - "5415:5432"
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U testuser"]
      interval: 10s
      timeout: 5s
      retries: 5
    volumes:
      - pgstudio-test-pg15:/var/lib/postgresql/data

  postgres-16:
    image: postgres:16-alpine
    container_name: pgstudio-test-pg16
    environment:
      POSTGRES_USER: testuser
      POSTGRES_PASSWORD: testpass
      POSTGRES_DB: testdb
    ports:
      - "5416:5432"
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U testuser"]
      interval: 10s
      timeout: 5s
      retries: 5
    volumes:
      - pgstudio-test-pg16:/var/lib/postgresql/data

  postgres-17:
    image: postgres:17-alpine
    container_name: pgstudio-test-pg17
    environment:
      POSTGRES_USER: testuser
      POSTGRES_PASSWORD: testpass
      POSTGRES_DB: testdb
    ports:
      - "5417:5432"
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U testuser"]
      interval: 10s
      timeout: 5s
      retries: 5
    volumes:
      - pgstudio-test-pg17:/var/lib/postgresql/data

volumes:
  pgstudio-test-pg12:
  pgstudio-test-pg14:
  pgstudio-test-pg15:
  pgstudio-test-pg16:
  pgstudio-test-pg17:
